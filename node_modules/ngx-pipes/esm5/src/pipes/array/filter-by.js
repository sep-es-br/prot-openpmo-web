/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { Pipe } from "@angular/core";
import { extractDeepPropertyByMapKey, extractDeepPropertyByParentMapKey, isBoolean, isNumberFinite, isString, isUndefined, } from "../helpers/helpers";
var FilterByPipe = /** @class */ (function () {
    function FilterByPipe() {
    }
    /**
     * @param {?} input
     * @param {?} props
     * @param {?=} search
     * @param {?=} strict
     * @return {?}
     */
    FilterByPipe.prototype.transform = /**
     * @param {?} input
     * @param {?} props
     * @param {?=} search
     * @param {?=} strict
     * @return {?}
     */
    function (input, props, search, strict) {
        if (search === void 0) { search = ""; }
        if (strict === void 0) { strict = false; }
        if (!Array.isArray(input) || (!isString(search) && !isNumberFinite(search) && !isBoolean(search))) {
            return input;
        }
        var /** @type {?} */ term = String(search).toLowerCase();
        return input.filter(function (obj) {
            return props.some(function (prop) {
                var /** @type {?} */ value = extractDeepPropertyByMapKey(obj, prop);
                var _a = extractDeepPropertyByParentMapKey(obj, prop), props = _a.props, tail = _a.tail;
                if (isUndefined(value) && !isUndefined(props) && Array.isArray(props)) {
                    return props.some(function (parent) {
                        var /** @type {?} */ str = String(parent[tail]).toLowerCase();
                        return strict ? str === term : !!~str.indexOf(term);
                    });
                }
                if (isUndefined(value)) {
                    return false;
                }
                var /** @type {?} */ strValue = String(value).toLowerCase();
                return strict ? term === strValue : !!~strValue.indexOf(term);
            });
        });
    };
    FilterByPipe.decorators = [
        { type: Pipe, args: [{ name: "filterBy" },] },
    ];
    return FilterByPipe;
}());
export { FilterByPipe };

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsdGVyLWJ5LmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LXBpcGVzLyIsInNvdXJjZXMiOlsic3JjL3BpcGVzL2FycmF5L2ZpbHRlci1ieS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLElBQUksRUFBaUIsTUFBTSxlQUFlLENBQUM7QUFDcEQsT0FBTyxFQUNMLDJCQUEyQixFQUMzQixpQ0FBaUMsRUFDakMsU0FBUyxFQUNULGNBQWMsRUFDZCxRQUFRLEVBQ1IsV0FBVyxHQUNaLE1BQU0sb0JBQW9CLENBQUM7Ozs7Ozs7Ozs7O0lBTzFCLGdDQUFTOzs7Ozs7O0lBQVQsVUFBVSxLQUFVLEVBQUUsS0FBb0IsRUFBRSxNQUFnQixFQUFFLE1BQXVCO1FBQXpDLHVCQUFBLEVBQUEsV0FBZ0I7UUFBRSx1QkFBQSxFQUFBLGNBQXVCO1FBQ25GLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xHLE1BQU0sQ0FBQyxLQUFLLENBQUM7U0FDZDtRQUVELHFCQUFNLElBQUksR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7UUFFMUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsVUFBQSxHQUFHO1lBQ3JCLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFVBQUEsSUFBSTtnQkFDcEIscUJBQU0sS0FBSyxHQUFHLDJCQUEyQixDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQztnQkFDckQsdURBQVEsZ0JBQUssRUFBRSxjQUFJLENBQWtEO2dCQUVyRSxFQUFFLENBQUMsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ3RFLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFVBQUEsTUFBTTt3QkFDdEIscUJBQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQzt3QkFFL0MsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztxQkFDckQsQ0FBQyxDQUFDO2lCQUNKO2dCQUVELEVBQUUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ3ZCLE1BQU0sQ0FBQyxLQUFLLENBQUM7aUJBQ2Q7Z0JBRUQscUJBQU0sUUFBUSxHQUFXLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztnQkFFckQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUMvRCxDQUFDLENBQUM7U0FDSixDQUFDLENBQUM7S0FDSjs7Z0JBakNGLElBQUksU0FBQyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUU7O3VCQVgxQjs7U0FZYSxZQUFZIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGlwZSwgUGlwZVRyYW5zZm9ybSB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQge1xuICBleHRyYWN0RGVlcFByb3BlcnR5QnlNYXBLZXksXG4gIGV4dHJhY3REZWVwUHJvcGVydHlCeVBhcmVudE1hcEtleSxcbiAgaXNCb29sZWFuLFxuICBpc051bWJlckZpbml0ZSxcbiAgaXNTdHJpbmcsXG4gIGlzVW5kZWZpbmVkLFxufSBmcm9tIFwiLi4vaGVscGVycy9oZWxwZXJzXCI7XG5cbi8vIHRzbGludDpkaXNhYmxlIG5vLWJpdHdpc2VcbkBQaXBlKHsgbmFtZTogXCJmaWx0ZXJCeVwiIH0pXG5leHBvcnQgY2xhc3MgRmlsdGVyQnlQaXBlIGltcGxlbWVudHMgUGlwZVRyYW5zZm9ybSB7XG4gIHRyYW5zZm9ybShpbnB1dDogYW55W10sIHByb3BzOiBBcnJheTxzdHJpbmc+LCBzZWFyY2g/OiBhbnksIHN0cmljdD86IGJvb2xlYW4pOiBhbnlbXTtcbiAgdHJhbnNmb3JtPFQ+KGlucHV0OiBULCBwcm9wczogQXJyYXk8c3RyaW5nPiwgc2VhcmNoPzogYW55LCBzdHJpY3Q/OiBib29sZWFuKTogVDtcbiAgdHJhbnNmb3JtKGlucHV0OiBhbnksIHByb3BzOiBBcnJheTxzdHJpbmc+LCBzZWFyY2g6IGFueSA9IFwiXCIsIHN0cmljdDogYm9vbGVhbiA9IGZhbHNlKTogYW55IHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoaW5wdXQpIHx8ICghaXNTdHJpbmcoc2VhcmNoKSAmJiAhaXNOdW1iZXJGaW5pdGUoc2VhcmNoKSAmJiAhaXNCb29sZWFuKHNlYXJjaCkpKSB7XG4gICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfVxuXG4gICAgY29uc3QgdGVybSA9IFN0cmluZyhzZWFyY2gpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICByZXR1cm4gaW5wdXQuZmlsdGVyKG9iaiA9PiB7XG4gICAgICByZXR1cm4gcHJvcHMuc29tZShwcm9wID0+IHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBleHRyYWN0RGVlcFByb3BlcnR5QnlNYXBLZXkob2JqLCBwcm9wKTtcbiAgICAgICAgY29uc3QgeyBwcm9wcywgdGFpbCB9ID0gZXh0cmFjdERlZXBQcm9wZXJ0eUJ5UGFyZW50TWFwS2V5KG9iaiwgcHJvcCk7XG5cbiAgICAgICAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSAmJiAhaXNVbmRlZmluZWQocHJvcHMpICYmIEFycmF5LmlzQXJyYXkocHJvcHMpKSB7XG4gICAgICAgICAgcmV0dXJuIHByb3BzLnNvbWUocGFyZW50ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0ciA9IFN0cmluZyhwYXJlbnRbdGFpbF0pLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgICAgIHJldHVybiBzdHJpY3QgPyBzdHIgPT09IHRlcm0gOiAhIX5zdHIuaW5kZXhPZih0ZXJtKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdHJWYWx1ZTogc3RyaW5nID0gU3RyaW5nKHZhbHVlKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIHJldHVybiBzdHJpY3QgPyB0ZXJtID09PSBzdHJWYWx1ZSA6ICEhfnN0clZhbHVlLmluZGV4T2YodGVybSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuIl19