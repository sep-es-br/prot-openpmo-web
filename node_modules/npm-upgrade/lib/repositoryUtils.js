'use strict';

exports.__esModule = true;
exports.getRepositoryInfo = getRepositoryInfo;

var _url = require('url');

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const KNOWN_REPOSITORIES = {
  'github.com': parsedRepositoryUrl => {
    const repositoryId = /^(.+?\/.+?)(?:\/|\.git$|$)/.exec(parsedRepositoryUrl.pathname.slice(1))[1];
    const rootUrl = `https://github.com/${repositoryId}`;

    return {
      repositoryId,
      fileUrlBuilder: filename => `${rootUrl}/blob/master/${filename}`,
      releasesPageUrl: `${rootUrl}/releases`
    };
  }
};

function getRepositoryInfo(repositoryUrl) {
  const parsedUrl = (0, _url.parse)(repositoryUrl);
  const hostname = parsedUrl.hostname;


  return _lodash2.default.has(KNOWN_REPOSITORIES, hostname) ? KNOWN_REPOSITORIES[hostname](parsedUrl) : null;
}